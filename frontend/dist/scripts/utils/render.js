import{switchWeatherIcon,switchColor}from"./switch_view.js";import getWeatherData from"../api.js";import{createWeatherStructure,createErrorStructure}from"./structure.js";const setContainerOpenId=()=>{document.querySelector(".container").id="opened"},setContainerRegisterId=()=>{document.querySelector(".container").id="register"},renderError=()=>{const e=document.querySelector(".container__wrapper"),r=document.querySelector(".weather-box");r&&r.remove();const t=document.querySelector(".error-box");t&&t.remove();const o=createErrorStructure();e.append(o),switchWeatherIcon(null),switchColor(null)},renderWeatherInfo=async e=>{let r;const t=document.querySelector(".search-input");r=t?t.value:e;const o=document.querySelector(".container");""!==r&&(o.style.height="650px");const n=document.querySelector(".container__wrapper"),c=await getWeatherData(r);if("city not found"===c.message)return void renderError();const u=document.querySelector(".error-box");u&&u.remove();const i=document.querySelector(".weather-box");i&&i.remove();const a=c.name,s=c.sys.country,{description:d,id:m}=c.weather[0],{temp:l,humidity:p}=c.main,h=c.wind.speed;return n.append(createWeatherStructure()),document.querySelector(".current-temp div").innerText=`${Math.round(l)}Â°C`,document.querySelector(".city").innerText=`${a}, ${s}`,document.querySelector(".description").innerText=d,document.querySelector("span.humidity.value").innerText=`${p}%`,document.querySelector("span.wind-speed.value").innerText=`${h} m/s`,switchWeatherIcon(m),switchColor(m),n};export{renderWeatherInfo,setContainerOpenId,setContainerRegisterId};